<div class="cubes-shell">
  <!-- subtle background like landing -->
  <div class="cubes-bg" aria-hidden="true"></div>

  <!-- header -->
  <header class="cubes-head">
    <div class="cubes-title">
      <div class="cubes-kicker">MY</div>
      <h1 class="cubes-h1">CUBES</h1>
    </div>
  </header>

  <!-- create panel (glass) -->
  <section class="create-wrap" *ngIf="showCreate">
    <div class="create-card">
      <div class="create-top">
        <div class="create-label">CREATE CUBE</div>
        <button
          type="button"
          class="create-close"
          (click)="toggleCreate()"
          aria-label="Close"
          title="Close"
        >
          ✕
        </button>
      </div>

      <form (ngSubmit)="createCube()" #f="ngForm" class="create-form">
        <div class="field">
          <label class="field-label">Cube name</label>
          <input
            class="field-input"
            name="name"
            [(ngModel)]="createModel.name"
            required
            minlength="3"
            maxlength="80"
            placeholder="e.g. Friday Night Cube"
          />
        </div>

        <div class="field">
          <label class="field-label">Max players</label>
          <input
            class="field-input"
            type="number"
            name="maxPlayers"
            [(ngModel)]="createModel.maxPlayers"
            required
            min="2"
            max="16"
          />
        </div>

        <button
          class="create-submit"
          type="submit"
          [disabled]="creating || f.invalid"
        >
          <span class="create-submit-text">{{
            creating ? 'CREATING…' : 'CREATE'
          }}</span>
        </button>

        <div class="create-error" *ngIf="createError">
          {{ createError }}
        </div>
      </form>
    </div>
  </section>

  <!-- states -->
  <div class="state" *ngIf="loading">LOADING…</div>

  <div class="state state-error" *ngIf="error">
    {{ error }}
  </div>

  <div
    class="state state-empty"
    *ngIf="!loading && !error && cubes.length === 0 && !showCreate"
  >
    NO CUBES YET. CLICK “CREATE CUBE”.
  </div>

  <!-- grid (always shows when not loading/error so the create tile appears even at 0 cubes) -->
  <section class="cube-grid" *ngIf="!loading && !error">
  <!-- Create tile -->
  <article class="cube-tile cube-tile-create">
  <button
    type="button"
    class="tile-link tile-create-btn"
    (click)="toggleCreate()"
    aria-label="Create cube"
    title="Create Cube"
  ></button>

  <div class="tile-create-center">
    <div class="tile-create-plus">+</div>
    <div class="tile-create-text">CREATE CUBE</div>
  </div>

  <div class="tile-glow" aria-hidden="true"></div>
</article>


    <!-- Existing cubes -->
    <article class="cube-tile" *ngFor="let c of cubes">
      <a
        class="tile-link"
        [routerLink]="['/cubes', c.cubeId]"
        aria-label="Open cube"
      ></a>

      <div class="tile-top">
        <div class="tile-name" [title]="c.name">{{ c.name }}</div>
        <span class="tile-role">{{ c.role }}</span>
      </div>

      <div class="tile-meta">
        <div class="tile-row">
          <span class="tile-key">MAX</span>
          <span class="tile-val">{{ c.maxPlayers }}</span>
        </div>
        <div class="tile-row">
          <span class="tile-key">CREATED</span>
          <span class="tile-val">{{ c.createdAt | date: 'mediumDate' }}</span>
        </div>
      </div>

      <div class="tile-glow" aria-hidden="true"></div>
    </article>
  </section>
</div>
